---
source: crates/tapir-script/compiler/src/compile/ir/optimisations.rs
expression: output
input_file: crates/tapir-script/compiler/src/compile/ir/snapshot_tests/optimisations/integration/comparison_ops.tapir
---
----------- before -------------
=======================
fn @toplevel() -> 

---- block 3 ----
getprop temp.31, 0
a.32 = temp.31
temp.33 = int 6
b.34 = temp.33
temp.35 = b.34
temp.36 = a.32
temp.37 = temp.35 > temp.36
conditional_jump temp.37 0 1

---- block 0 ----
temp.38 = int 15
temp.39 = black_box(temp.38)
c.40 = temp.39
wait
temp.41 = c.40
temp.42 = temp.41
storeprop temp.42, 0
jmp 2

---- block 1 ----
jmp 2

---- block 2 ----
b.43 = φ(b.34 from 0, b.34 from 1)
a.53 = φ(a.32 from 0, a.32 from 1)
temp.44 = b.43
getprop temp.45, 0
temp.46 = temp.44 < temp.45
conditional_jump temp.46 4 5

---- block 4 ----
temp.47 = int 20
temp.48 = black_box(temp.47)
c.49 = temp.48
wait
temp.50 = c.49
temp.51 = temp.50
storeprop temp.51, 0
jmp 6

---- block 5 ----
jmp 6

---- block 6 ----
a.52 = φ(a.53 from 4, a.53 from 5)
temp.54 = a.52
getprop temp.55, 0
temp.56 = temp.54 != temp.55
conditional_jump temp.56 7 8

---- block 7 ----
temp.57 = int 30
temp.58 = black_box(temp.57)
c.59 = temp.58
wait
temp.60 = c.59
temp.61 = temp.60
storeprop temp.61, 0
jmp 9

---- block 8 ----
jmp 9

---- block 9 ----
return 

=======================
fn black_box(x.6) -> int

---- block 0 ----
temp.62 = x.6
return temp.62


----------- empty_phi -------------
=======================
fn @toplevel() -> 

---- block 3 ----
getprop temp.31, 0
a.32 = temp.31
temp.33 = int 6
b.34 = temp.33
temp.35 = b.34
temp.36 = a.32
temp.37 = temp.35 > temp.36
conditional_jump temp.37 0 1

---- block 0 ----
temp.38 = int 15
temp.39 = black_box(temp.38)
c.40 = temp.39
wait
temp.41 = c.40
temp.42 = temp.41
storeprop temp.42, 0
jmp 2

---- block 1 ----
jmp 2

---- block 2 ----
temp.44 = b.34
getprop temp.45, 0
temp.46 = temp.44 < temp.45
conditional_jump temp.46 4 5

---- block 4 ----
temp.47 = int 20
temp.48 = black_box(temp.47)
c.49 = temp.48
wait
temp.50 = c.49
temp.51 = temp.50
storeprop temp.51, 0
jmp 6

---- block 5 ----
jmp 6

---- block 6 ----
temp.54 = a.32
getprop temp.55, 0
temp.56 = temp.54 != temp.55
conditional_jump temp.56 7 8

---- block 7 ----
temp.57 = int 30
temp.58 = black_box(temp.57)
c.59 = temp.58
wait
temp.60 = c.59
temp.61 = temp.60
storeprop temp.61, 0
jmp 9

---- block 8 ----
jmp 9

---- block 9 ----
return 

=======================
fn black_box(x.6) -> int

---- block 0 ----
temp.62 = x.6
return temp.62


----------- copy_propagation -------------
=======================
fn @toplevel() -> 

---- block 3 ----
getprop temp.31, 0
a.32 = temp.31
temp.33 = int 6
b.34 = temp.33
temp.35 = temp.33
temp.36 = temp.31
temp.37 = temp.33 > temp.31
conditional_jump temp.37 0 1

---- block 0 ----
temp.38 = int 15
temp.39 = black_box(temp.38)
c.40 = temp.39
wait
temp.41 = temp.39
temp.42 = temp.39
storeprop temp.39, 0
jmp 2

---- block 1 ----
jmp 2

---- block 2 ----
temp.44 = temp.33
getprop temp.45, 0
temp.46 = temp.33 < temp.45
conditional_jump temp.46 4 5

---- block 4 ----
temp.47 = int 20
temp.48 = black_box(temp.47)
c.49 = temp.48
wait
temp.50 = temp.48
temp.51 = temp.48
storeprop temp.48, 0
jmp 6

---- block 5 ----
jmp 6

---- block 6 ----
temp.54 = temp.31
getprop temp.55, 0
temp.56 = temp.31 != temp.55
conditional_jump temp.56 7 8

---- block 7 ----
temp.57 = int 30
temp.58 = black_box(temp.57)
c.59 = temp.58
wait
temp.60 = temp.58
temp.61 = temp.58
storeprop temp.58, 0
jmp 9

---- block 8 ----
jmp 9

---- block 9 ----
return 

=======================
fn black_box(x.6) -> int

---- block 0 ----
temp.62 = x.6
return x.6


----------- dead_store_elimination -------------
=======================
fn @toplevel() -> 

---- block 3 ----
getprop temp.31, 0
temp.33 = int 6
temp.37 = temp.33 > temp.31
conditional_jump temp.37 0 1

---- block 0 ----
temp.38 = int 15
temp.39 = black_box(temp.38)
wait
storeprop temp.39, 0
jmp 2

---- block 1 ----
jmp 2

---- block 2 ----
getprop temp.45, 0
temp.46 = temp.33 < temp.45
conditional_jump temp.46 4 5

---- block 4 ----
temp.47 = int 20
temp.48 = black_box(temp.47)
wait
storeprop temp.48, 0
jmp 6

---- block 5 ----
jmp 6

---- block 6 ----
getprop temp.55, 0
temp.56 = temp.31 != temp.55
conditional_jump temp.56 7 8

---- block 7 ----
temp.57 = int 30
temp.58 = black_box(temp.57)
wait
storeprop temp.58, 0
jmp 9

---- block 8 ----
jmp 9

---- block 9 ----
return 

=======================
fn black_box(x.6) -> int

---- block 0 ----
return x.6


----------- empty_block -------------
=======================
fn @toplevel() -> 

---- block 3 ----
getprop temp.31, 0
temp.33 = int 6
temp.37 = temp.33 > temp.31
conditional_jump temp.37 0 2

---- block 0 ----
temp.38 = int 15
temp.39 = black_box(temp.38)
wait
storeprop temp.39, 0
jmp 2

---- block 2 ----
getprop temp.45, 0
temp.46 = temp.33 < temp.45
conditional_jump temp.46 4 6

---- block 4 ----
temp.47 = int 20
temp.48 = black_box(temp.47)
wait
storeprop temp.48, 0
jmp 6

---- block 6 ----
getprop temp.55, 0
temp.56 = temp.31 != temp.55
conditional_jump temp.56 7 9

---- block 7 ----
temp.57 = int 30
temp.58 = black_box(temp.57)
wait
storeprop temp.58, 0
return 

---- block 9 ----
return 

=======================
fn black_box(x.6) -> int

---- block 0 ----
return x.6
