---
source: crates/tapir-script/compiler/src/compile/ir/optimisations.rs
expression: output
input_file: crates/tapir-script/compiler/src/compile/ir/snapshot_tests/optimisations/integration/comparison_ops.tapir
---
----------- before -------------
=======================
fn @toplevel() -> 

---- block 3 ----
getprop temp.32, 0
a.33 = temp.32
temp.34 = int 6
b.35 = temp.34
temp.36 = b.35
temp.37 = a.33
temp.38 = temp.36 > temp.37
conditional_jump temp.38 0 1

---- block 0 ----
temp.39 = int 15
temp.40 = black_box(temp.39)
c.41 = temp.40
wait
temp.42 = c.41
temp.43 = temp.42
storeprop temp.43, 0
jmp 2

---- block 1 ----
jmp 2

---- block 2 ----
b.44 = φ(b.35 from 0, b.35 from 1)
a.54 = φ(a.33 from 0, a.33 from 1)
temp.45 = b.44
getprop temp.46, 0
temp.47 = temp.45 < temp.46
conditional_jump temp.47 4 5

---- block 4 ----
temp.48 = int 20
temp.49 = black_box(temp.48)
c.50 = temp.49
wait
temp.51 = c.50
temp.52 = temp.51
storeprop temp.52, 0
jmp 6

---- block 5 ----
jmp 6

---- block 6 ----
a.53 = φ(a.54 from 4, a.54 from 5)
temp.55 = a.53
getprop temp.56, 0
temp.57 = temp.55 != temp.56
conditional_jump temp.57 7 8

---- block 7 ----
temp.58 = int 30
temp.59 = black_box(temp.58)
c.60 = temp.59
wait
temp.61 = c.60
temp.62 = temp.61
storeprop temp.62, 0
jmp 9

---- block 8 ----
jmp 9

---- block 9 ----
return 

=======================
fn black_box(x.7) -> int

---- block 0 ----
temp.63 = x.7
return temp.63


----------- empty_phi -------------
=======================
fn @toplevel() -> 

---- block 3 ----
getprop temp.32, 0
a.33 = temp.32
temp.34 = int 6
b.35 = temp.34
temp.36 = b.35
temp.37 = a.33
temp.38 = temp.36 > temp.37
conditional_jump temp.38 0 1

---- block 0 ----
temp.39 = int 15
temp.40 = black_box(temp.39)
c.41 = temp.40
wait
temp.42 = c.41
temp.43 = temp.42
storeprop temp.43, 0
jmp 2

---- block 1 ----
jmp 2

---- block 2 ----
temp.45 = b.35
getprop temp.46, 0
temp.47 = temp.45 < temp.46
conditional_jump temp.47 4 5

---- block 4 ----
temp.48 = int 20
temp.49 = black_box(temp.48)
c.50 = temp.49
wait
temp.51 = c.50
temp.52 = temp.51
storeprop temp.52, 0
jmp 6

---- block 5 ----
jmp 6

---- block 6 ----
temp.55 = a.33
getprop temp.56, 0
temp.57 = temp.55 != temp.56
conditional_jump temp.57 7 8

---- block 7 ----
temp.58 = int 30
temp.59 = black_box(temp.58)
c.60 = temp.59
wait
temp.61 = c.60
temp.62 = temp.61
storeprop temp.62, 0
jmp 9

---- block 8 ----
jmp 9

---- block 9 ----
return 

=======================
fn black_box(x.7) -> int

---- block 0 ----
temp.63 = x.7
return temp.63


----------- copy_propagation -------------
=======================
fn @toplevel() -> 

---- block 3 ----
getprop temp.32, 0
a.33 = temp.32
temp.34 = int 6
b.35 = temp.34
temp.36 = temp.34
temp.37 = temp.32
temp.38 = temp.34 > temp.32
conditional_jump temp.38 0 1

---- block 0 ----
temp.39 = int 15
temp.40 = black_box(temp.39)
c.41 = temp.40
wait
temp.42 = temp.40
temp.43 = temp.40
storeprop temp.40, 0
jmp 2

---- block 1 ----
jmp 2

---- block 2 ----
temp.45 = temp.34
getprop temp.46, 0
temp.47 = temp.34 < temp.46
conditional_jump temp.47 4 5

---- block 4 ----
temp.48 = int 20
temp.49 = black_box(temp.48)
c.50 = temp.49
wait
temp.51 = temp.49
temp.52 = temp.49
storeprop temp.49, 0
jmp 6

---- block 5 ----
jmp 6

---- block 6 ----
temp.55 = temp.32
getprop temp.56, 0
temp.57 = temp.32 != temp.56
conditional_jump temp.57 7 8

---- block 7 ----
temp.58 = int 30
temp.59 = black_box(temp.58)
c.60 = temp.59
wait
temp.61 = temp.59
temp.62 = temp.59
storeprop temp.59, 0
jmp 9

---- block 8 ----
jmp 9

---- block 9 ----
return 

=======================
fn black_box(x.7) -> int

---- block 0 ----
temp.63 = x.7
return x.7


----------- dead_store_elimination -------------
=======================
fn @toplevel() -> 

---- block 3 ----
getprop temp.32, 0
temp.34 = int 6
temp.38 = temp.34 > temp.32
conditional_jump temp.38 0 1

---- block 0 ----
temp.39 = int 15
temp.40 = black_box(temp.39)
wait
storeprop temp.40, 0
jmp 2

---- block 1 ----
jmp 2

---- block 2 ----
getprop temp.46, 0
temp.47 = temp.34 < temp.46
conditional_jump temp.47 4 5

---- block 4 ----
temp.48 = int 20
temp.49 = black_box(temp.48)
wait
storeprop temp.49, 0
jmp 6

---- block 5 ----
jmp 6

---- block 6 ----
getprop temp.56, 0
temp.57 = temp.32 != temp.56
conditional_jump temp.57 7 8

---- block 7 ----
temp.58 = int 30
temp.59 = black_box(temp.58)
wait
storeprop temp.59, 0
jmp 9

---- block 8 ----
jmp 9

---- block 9 ----
return 

=======================
fn black_box(x.7) -> int

---- block 0 ----
return x.7


----------- empty_block -------------
=======================
fn @toplevel() -> 

---- block 3 ----
getprop temp.32, 0
temp.34 = int 6
temp.38 = temp.34 > temp.32
conditional_jump temp.38 0 2

---- block 0 ----
temp.39 = int 15
temp.40 = black_box(temp.39)
wait
storeprop temp.40, 0
jmp 2

---- block 2 ----
getprop temp.46, 0
temp.47 = temp.34 < temp.46
conditional_jump temp.47 4 6

---- block 4 ----
temp.48 = int 20
temp.49 = black_box(temp.48)
wait
storeprop temp.49, 0
jmp 6

---- block 6 ----
getprop temp.56, 0
temp.57 = temp.32 != temp.56
conditional_jump temp.57 7 9

---- block 7 ----
temp.58 = int 30
temp.59 = black_box(temp.58)
wait
storeprop temp.59, 0
return 

---- block 9 ----
return 

=======================
fn black_box(x.7) -> int

---- block 0 ----
return x.7
