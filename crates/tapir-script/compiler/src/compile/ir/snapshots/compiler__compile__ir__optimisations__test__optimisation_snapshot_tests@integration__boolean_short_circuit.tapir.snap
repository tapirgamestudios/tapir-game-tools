---
source: crates/tapir-script/compiler/src/compile/ir/optimisations.rs
expression: output
input_file: crates/tapir-script/compiler/src/compile/ir/snapshot_tests/optimisations/integration/boolean_short_circuit.tapir
---
----------- before -------------
=======================
fn @toplevel() -> 

---- block 2 ----
getprop temp.15, 0
temp.16 = int 0
a.17 = temp.15 > temp.16
temp.18 = a.17
temp.19 = bool false
conditional_jump temp.18 0 1

---- block 0 ----
getprop temp.20, 0
temp.21 = int 100
temp.22 = temp.20 < temp.21
jmp 1

---- block 1 ----
temp.23 = φ(temp.19 from 2, temp.22 from 0)
a.26 = φ(a.17 from 2, a.17 from 0)
conditional_jump temp.23 3 4

---- block 3 ----
temp.24 = int 1
storeprop temp.24, 0
jmp 5

---- block 4 ----
jmp 5

---- block 5 ----
a.25 = φ(a.26 from 3, a.26 from 4)
temp.27 = a.25
temp.28 = bool true
conditional_jump temp.27 7 6

---- block 7 ----
temp.32 = φ(temp.28 from 5, temp.31 from 6)
conditional_jump temp.32 8 9

---- block 6 ----
getprop temp.29, 0
temp.30 = int 100
temp.31 = temp.29 < temp.30
jmp 7

---- block 8 ----
temp.33 = int 2
storeprop temp.33, 0
jmp 10

---- block 9 ----
jmp 10

---- block 10 ----
return 


----------- empty_phi -------------
=======================
fn @toplevel() -> 

---- block 2 ----
getprop temp.15, 0
temp.16 = int 0
a.17 = temp.15 > temp.16
temp.18 = a.17
temp.19 = bool false
conditional_jump temp.18 0 1

---- block 0 ----
getprop temp.20, 0
temp.21 = int 100
temp.22 = temp.20 < temp.21
jmp 1

---- block 1 ----
temp.23 = φ(temp.19 from 2, temp.22 from 0)
conditional_jump temp.23 3 4

---- block 3 ----
temp.24 = int 1
storeprop temp.24, 0
jmp 5

---- block 4 ----
jmp 5

---- block 5 ----
temp.27 = a.17
temp.28 = bool true
conditional_jump temp.27 7 6

---- block 7 ----
temp.32 = φ(temp.28 from 5, temp.31 from 6)
conditional_jump temp.32 8 9

---- block 6 ----
getprop temp.29, 0
temp.30 = int 100
temp.31 = temp.29 < temp.30
jmp 7

---- block 8 ----
temp.33 = int 2
storeprop temp.33, 0
jmp 10

---- block 9 ----
jmp 10

---- block 10 ----
return 


----------- copy_propagation -------------
=======================
fn @toplevel() -> 

---- block 2 ----
getprop temp.15, 0
temp.16 = int 0
a.17 = temp.15 > temp.16
temp.18 = a.17
temp.19 = bool false
conditional_jump a.17 0 1

---- block 0 ----
getprop temp.20, 0
temp.21 = int 100
temp.22 = temp.20 < temp.21
jmp 1

---- block 1 ----
temp.23 = φ(temp.19 from 2, temp.22 from 0)
conditional_jump temp.23 3 4

---- block 3 ----
temp.24 = int 1
storeprop temp.24, 0
jmp 5

---- block 4 ----
jmp 5

---- block 5 ----
temp.27 = a.17
temp.28 = bool true
conditional_jump a.17 7 6

---- block 7 ----
temp.32 = φ(temp.28 from 5, temp.31 from 6)
conditional_jump temp.32 8 9

---- block 6 ----
getprop temp.29, 0
temp.30 = int 100
temp.31 = temp.29 < temp.30
jmp 7

---- block 8 ----
temp.33 = int 2
storeprop temp.33, 0
jmp 10

---- block 9 ----
jmp 10

---- block 10 ----
return 


----------- dead_store_elimination -------------
=======================
fn @toplevel() -> 

---- block 2 ----
getprop temp.15, 0
temp.16 = int 0
a.17 = temp.15 > temp.16
temp.19 = bool false
conditional_jump a.17 0 1

---- block 0 ----
getprop temp.20, 0
temp.21 = int 100
temp.22 = temp.20 < temp.21
jmp 1

---- block 1 ----
temp.23 = φ(temp.19 from 2, temp.22 from 0)
conditional_jump temp.23 3 4

---- block 3 ----
temp.24 = int 1
storeprop temp.24, 0
jmp 5

---- block 4 ----
jmp 5

---- block 5 ----
temp.28 = bool true
conditional_jump a.17 7 6

---- block 7 ----
temp.32 = φ(temp.28 from 5, temp.31 from 6)
conditional_jump temp.32 8 9

---- block 6 ----
getprop temp.29, 0
temp.30 = int 100
temp.31 = temp.29 < temp.30
jmp 7

---- block 8 ----
temp.33 = int 2
storeprop temp.33, 0
jmp 10

---- block 9 ----
jmp 10

---- block 10 ----
return 


----------- empty_block -------------
=======================
fn @toplevel() -> 

---- block 2 ----
getprop temp.15, 0
temp.16 = int 0
a.17 = temp.15 > temp.16
temp.19 = bool false
conditional_jump a.17 0 1

---- block 0 ----
getprop temp.20, 0
temp.21 = int 100
temp.22 = temp.20 < temp.21
jmp 1

---- block 1 ----
temp.23 = φ(temp.19 from 2, temp.22 from 0)
conditional_jump temp.23 3 5

---- block 3 ----
temp.24 = int 1
storeprop temp.24, 0
jmp 5

---- block 5 ----
temp.28 = bool true
conditional_jump a.17 7 6

---- block 7 ----
temp.32 = φ(temp.28 from 5, temp.31 from 6)
conditional_jump temp.32 8 10

---- block 6 ----
getprop temp.29, 0
temp.30 = int 100
temp.31 = temp.29 < temp.30
jmp 7

---- block 8 ----
temp.33 = int 2
storeprop temp.33, 0
return 

---- block 10 ----
return
