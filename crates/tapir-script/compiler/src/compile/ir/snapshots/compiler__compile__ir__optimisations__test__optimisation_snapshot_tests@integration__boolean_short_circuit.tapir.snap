---
source: crates/tapir-script/compiler/src/compile/ir/optimisations.rs
expression: output
input_file: crates/tapir-script/compiler/src/compile/ir/snapshot_tests/optimisations/integration/boolean_short_circuit.tapir
---
----------- before -------------
=======================
fn @toplevel() -> 

---- block 2 ----
getprop temp.18, 0
temp.19 = int 0
temp.20 = temp.18 > temp.19
a.21 = temp.20
temp.22 = a.21
temp.23 = bool false
conditional_jump temp.22 0 1

---- block 0 ----
getprop temp.24, 0
temp.25 = int 100
temp.26 = temp.24 < temp.25
jmp 1

---- block 1 ----
temp.27 = φ(temp.23 from 2, temp.26 from 0)
a.31 = φ(a.21 from 2, a.21 from 0)
conditional_jump temp.27 3 4

---- block 3 ----
temp.28 = int 1
temp.29 = temp.28
storeprop temp.29, 0
jmp 5

---- block 4 ----
jmp 5

---- block 5 ----
a.30 = φ(a.31 from 3, a.31 from 4)
temp.32 = a.30
temp.33 = bool true
conditional_jump temp.32 7 6

---- block 7 ----
temp.37 = φ(temp.33 from 5, temp.36 from 6)
conditional_jump temp.37 8 9

---- block 6 ----
getprop temp.34, 0
temp.35 = int 100
temp.36 = temp.34 < temp.35
jmp 7

---- block 8 ----
temp.38 = int 2
temp.39 = temp.38
storeprop temp.39, 0
jmp 10

---- block 9 ----
jmp 10

---- block 10 ----
return 


----------- empty_phi -------------
=======================
fn @toplevel() -> 

---- block 2 ----
getprop temp.18, 0
temp.19 = int 0
temp.20 = temp.18 > temp.19
a.21 = temp.20
temp.22 = a.21
temp.23 = bool false
conditional_jump temp.22 0 1

---- block 0 ----
getprop temp.24, 0
temp.25 = int 100
temp.26 = temp.24 < temp.25
jmp 1

---- block 1 ----
temp.27 = φ(temp.23 from 2, temp.26 from 0)
conditional_jump temp.27 3 4

---- block 3 ----
temp.28 = int 1
temp.29 = temp.28
storeprop temp.29, 0
jmp 5

---- block 4 ----
jmp 5

---- block 5 ----
temp.32 = a.21
temp.33 = bool true
conditional_jump temp.32 7 6

---- block 7 ----
temp.37 = φ(temp.33 from 5, temp.36 from 6)
conditional_jump temp.37 8 9

---- block 6 ----
getprop temp.34, 0
temp.35 = int 100
temp.36 = temp.34 < temp.35
jmp 7

---- block 8 ----
temp.38 = int 2
temp.39 = temp.38
storeprop temp.39, 0
jmp 10

---- block 9 ----
jmp 10

---- block 10 ----
return 


----------- copy_propagation -------------
=======================
fn @toplevel() -> 

---- block 2 ----
getprop temp.18, 0
temp.19 = int 0
temp.20 = temp.18 > temp.19
a.21 = temp.20
temp.22 = temp.20
temp.23 = bool false
conditional_jump temp.20 0 1

---- block 0 ----
getprop temp.24, 0
temp.25 = int 100
temp.26 = temp.24 < temp.25
jmp 1

---- block 1 ----
temp.27 = φ(temp.23 from 2, temp.26 from 0)
conditional_jump temp.27 3 4

---- block 3 ----
temp.28 = int 1
temp.29 = temp.28
storeprop temp.28, 0
jmp 5

---- block 4 ----
jmp 5

---- block 5 ----
temp.32 = temp.20
temp.33 = bool true
conditional_jump temp.20 7 6

---- block 7 ----
temp.37 = φ(temp.33 from 5, temp.36 from 6)
conditional_jump temp.37 8 9

---- block 6 ----
getprop temp.34, 0
temp.35 = int 100
temp.36 = temp.34 < temp.35
jmp 7

---- block 8 ----
temp.38 = int 2
temp.39 = temp.38
storeprop temp.38, 0
jmp 10

---- block 9 ----
jmp 10

---- block 10 ----
return 


----------- dead_store_elimination -------------
=======================
fn @toplevel() -> 

---- block 2 ----
getprop temp.18, 0
temp.19 = int 0
temp.20 = temp.18 > temp.19
temp.23 = bool false
conditional_jump temp.20 0 1

---- block 0 ----
getprop temp.24, 0
temp.25 = int 100
temp.26 = temp.24 < temp.25
jmp 1

---- block 1 ----
temp.27 = φ(temp.23 from 2, temp.26 from 0)
conditional_jump temp.27 3 4

---- block 3 ----
temp.28 = int 1
storeprop temp.28, 0
jmp 5

---- block 4 ----
jmp 5

---- block 5 ----
temp.33 = bool true
conditional_jump temp.20 7 6

---- block 7 ----
temp.37 = φ(temp.33 from 5, temp.36 from 6)
conditional_jump temp.37 8 9

---- block 6 ----
getprop temp.34, 0
temp.35 = int 100
temp.36 = temp.34 < temp.35
jmp 7

---- block 8 ----
temp.38 = int 2
storeprop temp.38, 0
jmp 10

---- block 9 ----
jmp 10

---- block 10 ----
return 


----------- empty_block -------------
=======================
fn @toplevel() -> 

---- block 2 ----
getprop temp.18, 0
temp.19 = int 0
temp.20 = temp.18 > temp.19
temp.23 = bool false
conditional_jump temp.20 0 1

---- block 0 ----
getprop temp.24, 0
temp.25 = int 100
temp.26 = temp.24 < temp.25
jmp 1

---- block 1 ----
temp.27 = φ(temp.23 from 2, temp.26 from 0)
conditional_jump temp.27 3 5

---- block 3 ----
temp.28 = int 1
storeprop temp.28, 0
jmp 5

---- block 5 ----
temp.33 = bool true
conditional_jump temp.20 7 6

---- block 7 ----
temp.37 = φ(temp.33 from 5, temp.36 from 6)
conditional_jump temp.37 8 10

---- block 6 ----
getprop temp.34, 0
temp.35 = int 100
temp.36 = temp.34 < temp.35
jmp 7

---- block 8 ----
temp.38 = int 2
storeprop temp.38, 0
return 

---- block 10 ----
return
