global counter = 0;

fn counter_updater(max: int) {
    loop {
        counter = counter + 1;
        if counter >= max {
            break;
        }
        wait;
    }
}

spawn counter_updater(5);

loop {
    int_prop = counter;
    if counter >= 5 {
        break;
    }
    wait;
}
